<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>
<?import java.lang.String?>

<BorderPane fx:id="mainContainer" xmlns="http://javafx.com/javafx/11.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.chat.control.MainControl"
            stylesheets="@../css/main.css"
            prefWidth="800" prefHeight="600">

    <top>
        <HBox fx:id="topBar" spacing="15" styleClass="top-bar"
              alignment="CENTER_LEFT">
            <padding>
                <Insets top="10" right="15" bottom="10" left="15"/>
            </padding>

            <!-- 用户头像 -->
            <ImageView fx:id="avatarImage"
                       fitWidth="40" fitHeight="40"
                       style="-fx-border-radius: 20; -fx-background-radius: 20;"/>

            <!-- 用户名 -->
            <Label fx:id="usernameLabel" styleClass="username-label"/>

            <Region HBox.hgrow="ALWAYS" />

            <!-- 刷新按钮 -->
            <Button fx:id="refreshButton" text="刷新"
                    prefWidth="60" prefHeight="35"
                    onAction="#handleRefreshClick"
                    styleClass="primary-button">
                <tooltip>
                    <Tooltip text="刷新好友和群组列表 (F5)"/>
                </tooltip>
            </Button>

            <!-- 通知按钮 -->
            <Button fx:id="notificationButton" text="通知"
                    prefWidth="60" prefHeight="35"
                    styleClass="soft-button"/>

            <!-- 主菜单 -->
            <MenuButton fx:id="mainMenu" text="菜单"
                        prefWidth="60" prefHeight="35"
                        styleClass="ghost-button">
                <items>
                    <!-- 个人资料 -->
                    <MenuItem fx:id="profileMenuItem" text="个人资料"
                              onAction="#showUserProfile"/>

                    <!-- 添加好友 -->
                    <MenuItem fx:id="addFriendMenuItem" text="添加好友"
                              onAction="#showAddFriendDialog"/>

                    <!-- 创建群聊 -->
                    <MenuItem fx:id="createGroupMenuItem" text="创建群聊"
                              onAction="#showCreateGroupDialog"/>

                    <!-- 设置 -->
                    <MenuItem fx:id="settingsMenuItem" text="设置"
                              onAction="#showSettings"/>
                </items>
            </MenuButton>
        </HBox>
    </top>

    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" styleClass="pill-tabs">
            <Tab fx:id="messagesTab" text="消息">
                <content>
                    <ListView fx:id="messagesListView" styleClass="list-view">
                        <placeholder>
                            <Label text="暂无消息" styleClass="list-placeholder" />
                        </placeholder>
                    </ListView>
                </content>
            </Tab>
            <Tab fx:id="contactsTab" text="联系人">
                <content>
                    <ListView fx:id="contactsListView" styleClass="list-view">
                        <placeholder>
                            <Label text="暂无联系人" styleClass="list-placeholder" />
                        </placeholder>
                    </ListView>
                </content>
            </Tab>
            <Tab fx:id="groupsTab" text="群聊">
                <content>
                    <ListView fx:id="groupsListView" styleClass="list-view">
                        <placeholder>
                            <Label text="暂无群聊" styleClass="list-placeholder" />
                        </placeholder>
                    </ListView>
                </content>
            </Tab>
        </TabPane>
    </center>
</BorderPane>